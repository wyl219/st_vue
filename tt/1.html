<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Grid Generator</title>
    <style>
        #output {
            margin-top: 20px;
            border: 1px solid #000;
        }
        #downloadButton {
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
<h1>Image Grid Generator</h1>
<input type="file" id="fileInput" accept="image/*">
<canvas id="output" width="1200" height="1800"></canvas>
<button id="downloadButton">Download Image</button>

<script>
    document.getElementById('fileInput').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (!file) {
            alert("Please select an image.");
            return;
        }

        const canvas = document.getElementById('output');
        const ctx = canvas.getContext('2d');

        const rows = 4;
        const cols = 2;
        const imgWidth = canvas.width / cols;
        const imgHeight = canvas.height / rows;

        const img = new Image();
        img.onload = () => {
            for (let i = 0; i < rows * cols; i++) {
                const x = (i % cols) * imgWidth;
                const y = Math.floor(i / cols) * imgHeight;
                ctx.drawImage(img, x, y, imgWidth, imgHeight);
            }
            document.getElementById('downloadButton').style.display = 'block';
        };
        img.src = URL.createObjectURL(file);
    });

    document.getElementById('downloadButton').addEventListener('click', function() {
        const canvas = document.getElementById('output');
        const link = document.createElement('a');
        link.download = 'image-grid.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    });
</script>
</body>
</html>
